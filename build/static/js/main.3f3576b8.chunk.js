(this["webpackJsonpimms-x-dbms-project"]=this["webpackJsonpimms-x-dbms-project"]||[]).push([[0],{113:function(e,t,a){},115:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),i=a.n(r),c=(a(45),a(3)),o=a(4),l=a(2),u=a(6),m=a(5),d=a(9),h=a.n(d),p=a(8),f=(a(75),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"layout-topbar clearfix"},s.a.createElement("button",{className:"p-link layout-menu-button",onClick:this.props.onToggleMenu},s.a.createElement("span",{className:"menubar"})),s.a.createElement("div",{className:"pcampus"}),s.a.createElement("div",{className:"layout-heading"},s.a.createElement("p",null,"Internal Marks Management System")))}}]),a}(n.Component));f.defaultProps={onToggleMenu:null};var b=a(16),v=a(17),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activeIndex:null},n}return Object(o.a)(a,[{key:"onMenuItemClick",value:function(e,t,a){if(t.disabled)return e.preventDefault(),!0;t.command&&t.command({originalEvent:e,item:t}),a===this.state.activeIndex?this.setState({activeIndex:null}):this.setState({activeIndex:a}),this.props.onMenuItemClick&&this.props.onMenuItemClick({originalEvent:e,item:t})}},{key:"renderLinkContent",value:function(e){var t=e.items&&s.a.createElement("i",{className:"pi pi-fw pi-angle-down menuitem-toggle-icon"}),a=e.badge&&s.a.createElement("span",{className:"menuitem-badge"},e.badge);return s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:e.icon}),s.a.createElement("span",null,e.label),t,a)}},{key:"renderLink",value:function(e,t){var a=this,n=this.renderLinkContent(e);return e.to?s.a.createElement(v.b,{activeClassName:"active-route",to:e.to,onClick:function(n){return a.onMenuItemClick(n,e,t)},exact:!0,target:e.target},n):s.a.createElement("a",{href:e.url,onClick:function(n){return a.onMenuItemClick(n,e,t)},target:e.target},n)}},{key:"render",value:function(){var e=this,t=this.props.items&&this.props.items.map((function(t,n){var r=e.state.activeIndex===n,i=h()(t.badgeStyleClass,{"active-menuitem":r&&!t.to});return s.a.createElement("li",{className:i,key:n},t.items&&!0===e.props.root&&s.a.createElement("div",{className:"arrow"}),e.renderLink(t,n),s.a.createElement(a,{items:t.items,onMenuItemClick:e.props.onMenuItemClick}))}));return t?s.a.createElement("ul",{className:this.props.className},t):null}}]),a}(n.Component);E.defaultProps={className:null,items:null,onMenuItemClick:null,root:!1};var g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"layout-menu-container"},s.a.createElement(E,{items:this.props.model,className:"layout-menu",onMenuItemClick:this.props.onMenuItemClick,root:!0}))}}]),a}(n.Component);g.defaultProps={model:null,onMenuItemClick:null};var S=a(1),y=a(23),T=a(57),j=a.n(T),C=a(10),k=a(13),O=a(30),_=a(21),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={displayPosition:!1,position:"top-left",expanded:!0,currPass:"",newPass:"",confirmPass:""},n.onClick=n.onClick.bind(Object(l.a)(n)),n.onHide=n.onHide.bind(Object(l.a)(n)),n.hideDialog=n.hideDialog.bind(Object(l.a)(n)),n.changePass=n.changePass.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"onClick",value:function(e,t){var a=Object(y.a)({},"".concat(e),!0);t&&(a=Object(S.a)(Object(S.a)({},a),{},{position:t})),this.setState(a)}},{key:"onHide",value:function(e){this.setState(Object(y.a)({},"".concat(e),!1))}},{key:"hideDialog",value:function(){this.setState({displayPosition:!1})}},{key:"changePass",value:function(){var e=this;""===this.state.currPass?this.toast.show({severity:"info",summary:"Cannot Proceed",detail:"Must enter the old Password"}):""===this.state.newPass||""===this.state.confirmPass?this.toast.show({severity:"info",summary:"Cannot Proceed",detail:"Must enter both new and Retype password"}):this.state.newPass!==this.state.confirmPass?this.toast.show({severity:"info",summary:"Cannot Proceed",detail:"New Password and Retype Password doesn't match"}):fetch("/api/user/changePassword/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person_id:this.props.username,old_password:this.state.currPass,new_password:this.state.newPass})}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(e.toast.show({severity:"success",summary:"Password Successfully Updated",detail:t.message}),e.setState({currPass:"",newPass:"",confirmPass:""})):e.toast.show({severity:"error",summary:"Password Change Failed",detail:t.message}),e.setState({displayPosition:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:this.hideDialog}),s.a.createElement(C.Button,{label:"Confirm",icon:"pi pi-check",className:"p-button-text",onClick:this.changePass}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.Toast,{position:"bottom-right",style:{zIndex:1e4},ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"layout-profile"},s.a.createElement("div",null,s.a.createElement("img",{src:j.a,width:"100px",alt:""})),s.a.createElement("button",{className:"p-link layout-profile-link",onClick:this.onClick},s.a.createElement("span",{className:"username"},this.props.full_name)),s.a.createElement("ul",{className:h()({"layout-profile-expanded":this.state.expanded})},s.a.createElement("li",null,s.a.createElement("button",{className:"p-link",onClick:function(){return e.onClick("displayPosition","left")}},s.a.createElement("i",{className:"pi pi-fw pi-user"}),s.a.createElement("span",null,"Account")))),s.a.createElement(O.Dialog,{className:"accounttextleft",header:"Change Password",visible:this.state.displayPosition,position:this.state.position,style:{width:"300px"},footer:t,onHide:function(){return e.onHide("displayPosition")}},s.a.createElement("div",{className:"p-grid  p-dir-col"},s.a.createElement("div",{style:{margin:"5px"}},s.a.createElement(_.InputText,{value:this.state.currPass,onChange:function(t){return e.setState({currPass:t.target.value})},placeholder:"Input Current Password"})),s.a.createElement("div",{style:{margin:"5px"}},s.a.createElement(_.InputText,{value:this.state.newPass,onChange:function(t){return e.setState({newPass:t.target.value})},placeholder:"Input New Password"})),s.a.createElement("div",{style:{margin:"5px"}},s.a.createElement(_.InputText,{value:this.state.confirmPass,onChange:function(t){return e.setState({confirmPass:t.target.value})},placeholder:"Retype New Password"}))))))}}]),a}(n.Component),x=Object(p.b)((function(e){return{full_name:e.auth.full_name,username:e.auth.username}}),null)(N),w=a(31),D=function(e){return{type:"SET_TEACHER_INFOBOX",value:e}},I=function(e){return{type:"AUTH_FAIL",error:e}},A=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("username"),localStorage.removeItem("role"),{type:"AUTH_LOGOUT"}},M=function(e){return{type:"SET_AUTH_REDIRECT",value:e}},B=a(22),F=(a(33),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={deadline:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.infoBox&&this.toast.show({severity:"info",summary:this.props.infoBox.summary,detail:this.props.infoBox.detail}),this.props.setInfoBoxNULL(),fetch("/api/marks/deadline/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({deadline:t.deadline.substring(0,10)}):e.toast.show({severity:"error",summary:"Deadline Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"onCardSelectHandler",value:function(e){this.props.selectCard(e.lecture_id),this.props.setSectionSubject([e.section_code,e.subject_code,e.theory_fm,e.practical_fm]),this.props.setRedirect()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-grid"},s.a.createElement("div",{className:"p-col-9"},s.a.createElement("h3",null,"Choose your subject and see Student details.")),s.a.createElement("div",{className:"p-col-3"},s.a.createElement("h3",{style:{color:"red"}},"Marks Submission Till : ",this.state.deadline))),s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(t){return e.toast=t}}),this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement("div",{className:"p-lg-12 p-d-flex p-flex-wrap p-flex-column p-flex-lg-row"},this.props.classes.map((function(t,a){return s.a.createElement(w.Card,{key:a,title:t.subject_code,subTitle:t.title,style:{width:"20em"},className:"p-shadow-8 p-mb-3 p-mr-3",footer:s.a.createElement(C.Button,{style:{width:"100%"},label:"View",onClick:function(){return e.onCardSelectHandler(t)}})},s.a.createElement("span",{style:{margin:"0 1em 0 0"},className:"p-tag p-badge-secondary p-tag-rounded"},t.section_code.slice(0,-2)),s.a.createElement("span",{className:"p-tag p-badge-secondary p-tag-rounded"},t.section_code.slice(-2)),s.a.createElement("p",{className:"p-m-0",style:{lineHeight:"1.5"}}))}))),this.props.redirect)}}]),a}(s.a.Component)),P=Object(p.b)((function(e){return{classes:e.teacher.classes,infoBox:e.teacher.infoBox,redirect:e.auth.redirect,loading:e.teacher.loading}}),(function(e){return{selectCard:function(t){return e(function(e){return{type:"SET_TEACHER_ACTIVE_CLASS",Class:e}}(t))},setSectionSubject:function(t){return e(function(e){return{type:"SET_TEACHER_ACTIVE_SECTION_SUBJECT",value:e}}(t))},setInfoBoxNULL:function(){return e(D(null))},setRedirect:function(){return e(M(s.a.createElement(b.a,{to:"/marksview"})))}}}))(F),R=a(19),L=a(29),V=a(12),U=(a(51),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).exportCSV=n.exportCSV.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;for(this.props.activeClass||this.props.setInfoBox({summary:"Info Message",detail:"No Active Class Selected!!!"}),this.props.setRedirectNULL(),e=0;e<this.props.classStudentValues.length;e++)if(this.props.classStudentValues[e].classId===this.props.activeClass){this.props.setActiveStudentIndex(e);break}e===this.props.classStudentValues.length&&null!==this.props.activeClass&&fetch("/api/marks/lecture/"+this.props.activeClass,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.status){for(var a=Object(R.a)(e.data),n=0;n<a.length;n++)-2===a[n].theory_marks||-2===a[n].practical_marks?a[n].remarks="NQ":-1===a[n].theory_marks||-1===a[n].practical_marks?a[n].remarks="Absent":a[n].remarks="Regular";t.props.setClassStudentValues({classId:t.props.activeClass,data:a}),t.props.setActiveStudentIndex(t.props.classStudentValues.length-1)}else t.toast.show({severity:"error",summary:"Section Marks Fetch Failed",detail:e.message})})).catch((function(e){return console.log(e)}))}},{key:"exportCSV",value:function(){this.dt.exportCSV()}},{key:"render",value:function(){var e=this,t=this.props.classStudentValues[this.props.classIndex];return s.a.createElement(n.Fragment,null,this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement(n.Fragment,null,t?s.a.createElement("div",{className:"datatable-editing"},s.a.createElement(k.Toast,{ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"card"},s.a.createElement("h3",{style:{color:"#B22222"}},"Marks Summary View : Assessment and Practical Marks are NOT Editable"),s.a.createElement("div",{className:"p-col p-offset-11"},s.a.createElement(C.Button,{label:"Export",icon:"pi pi-upload",className:"p-button-help",onClick:this.exportCSV})),s.a.createElement(L.DataTable,{ref:function(t){return e.dt=t},value:t.data,header:"Student Data for Section "+this.props.sectionSubject[0]+" of Subject with Subject Code : "+this.props.sectionSubject[1]+" ------ TheoryFM: "+this.props.sectionSubject[2]+" ------ PracticalFM: "+this.props.sectionSubject[3]},s.a.createElement(V.Column,{field:"username",style:{width:"150px"},header:"RollNo",sortable:!0}),s.a.createElement(V.Column,{field:"full_name",style:{width:"350"},header:"Name",sortable:!0}),s.a.createElement(V.Column,{field:"theory_marks",style:{width:"150px"},header:"Assessment",sortable:!0}),s.a.createElement(V.Column,{field:"practical_marks",style:{width:"150px"},header:"Practical",sortable:!0}),s.a.createElement(V.Column,{field:"remarks",style:{width:"150px"},header:"Remarks",sortable:!0})))):null))}}]),a}(n.Component)),H=Object(p.b)((function(e){return{activeClass:e.teacher.activeClass,classStudentValues:e.teacher.classStudentValues,classIndex:e.teacher.activeClassStudentValuesIndex,sectionSubject:e.teacher.activeSectionSubject,loading:e.teacher.loading,infoBox:e.teacher.infoBox}}),(function(e){return{setRedirectNULL:function(){return e(M(null))},setClassStudentValues:function(t){return e({type:"SET_TEACHER_CLASS_STUDENT_VALUES",value:t})},setActiveStudentIndex:function(t){return e(function(e){return{type:"SET_TEACHER_ACTIVE_CLASS_STUDENT_VALUE_INDEX",value:e}}(t))},setInfoBox:function(t){return e(D(t))}}}))(U),q=a(28),G=a(65),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).state={data:null},n.toast=null,n.onMarksSubmitHandler=n.onMarksSubmitHandler.bind(Object(l.a)(n)),n.remarksBodyTemplate=n.remarksBodyTemplate.bind(Object(l.a)(n)),n.onRemarksChange=n.onRemarksChange.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.activeClass?this.setState({data:this.props.classStudentValues[this.props.classIndex].data}):this.props.setInfoBox({summary:"Info Message",detail:"No Active Class Selected!!!"})}},{key:"onEditorValueChange",value:function(e,t,a){var n=Object(R.a)(t.value),s=!1;if(!Object(G.a)(parseInt(a)))return n[t.rowIndex][t.field]=0,void this.setState(Object(y.a)({},"".concat(e),n));switch(t.field){case"theory_marks":s=parseInt(a)>=0&&parseInt(a)<=this.props.sectionSubject[2];break;case"practical_marks":s=parseInt(a)>=0&&parseInt(a)<=this.props.sectionSubject[3];break;default:s=!1}s&&(n[t.rowIndex][t.field]=parseInt(a),this.setState(Object(y.a)({},"".concat(e),n)))}},{key:"inputTextEditor",value:function(e,t,a){var n=this;return s.a.createElement(_.InputText,{style:{width:"5em"},type:"number",value:t.rowData[a],onChange:function(a){return n.onEditorValueChange(e,t,a.target.value)}})}},{key:"AssessmentEditor",value:function(e,t){return this.inputTextEditor(e,t,"theory_marks")}},{key:"PracticalEditor",value:function(e,t){return this.inputTextEditor(e,t,"practical_marks")}},{key:"onMarksSubmitHandler",value:function(e){var t=this;e.preventDefault();for(var a=Object(R.a)(this.state.data),n=0;n<a.length;n++)"NQ"===a[n].remarks?(a[n].theory_marks=-2,a[n].practical_marks=-2):"Absent"===a[n].remarks&&(a[n].theory_marks=-1,a[n].practical_marks=-1);fetch("/api/marks/lecture/"+this.props.activeClass,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.data)}).then((function(e){return e.json()})).then((function(e){"success"===e.status?(t.props.updateValues(a),t.toast.show({severity:"info",summary:"Submission Succeded",detail:"The Marks has been Successfully Updated!!!"})):t.toast.show({severity:"error",summary:"Submission Failed",detail:e.message})})).catch((function(e){return console.log(e)}))}},{key:"onRemarksChange",value:function(e,t){for(var a=Object(R.a)(this.state.data),n=0;n<a.length;n++)if(e.username===a[n].username){a[n].remarks=t.value;break}this.setState({data:a})}},{key:"remarksBodyTemplate",value:function(e){var t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(q.Dropdown,{value:e.remarks,options:["NQ","Absent","Regular"],onChange:function(a){return t.onRemarksChange(e,a)},required:!0,placeholder:"Select a Remark"}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"datatable-editing"},s.a.createElement(k.Toast,{ref:function(t){return e.toast=t}}),this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,s.a.createElement("div",{className:"card"},s.a.createElement("h3",{style:{color:"#228B22"}},"Marks Editing View : Assessment and Practical Marks are Editable"),s.a.createElement("div",{style:{padding:"10px 0",display:"flex",justifyContent:"flex-end"}},s.a.createElement(C.Button,{label:"Confirm & Submit",onClick:this.onMarksSubmitHandler})),s.a.createElement(L.DataTable,{value:this.state.data,editMode:"cell",className:"editable-cells-table",header:this.props.activeClass?"Student Data for Section "+this.props.sectionSubject[0]+" of Subject with Subject Code : "+this.props.sectionSubject[1]+" ------ TheoryFM: "+this.props.sectionSubject[2]+" ------ PracticalFM: "+this.props.sectionSubject[3]:null},s.a.createElement(V.Column,{field:"username",style:{width:"150px"},header:"RollNo",sortable:!0}),s.a.createElement(V.Column,{field:"full_name",style:{width:"350px"},header:"Name",sortable:!0}),s.a.createElement(V.Column,{field:"theory_marks",style:{width:"150px"},header:"Assessment",editor:function(t){return e.AssessmentEditor("data",t)}}),s.a.createElement(V.Column,{field:"practical_marks",style:{width:"150px"},header:"Practical",editor:function(t){return e.PracticalEditor("data",t)}}),s.a.createElement(V.Column,{header:"Remarks",style:{width:"150px"},body:this.remarksBodyTemplate}))))}}]),a}(n.Component),X=Object(p.b)((function(e){return{infoBox:e.teacher.infoBox,classStudentValues:e.teacher.classStudentValues,classIndex:e.teacher.activeClassStudentValuesIndex,sectionSubject:e.teacher.activeSectionSubject,activeClass:e.teacher.activeClass}}),(function(e){return{setInfoBox:function(t){return e(D(t))},updateValues:function(t){return e(function(e){return{type:"UPDATE_TEACHER_CLASS_STUDENT_VALUES",value:e}}(t))}}}))(J),z=a(43),K=(a(52),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={assessmentData:null,practicalData:null,max:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){if(null===this.props.activeClass&&this.props.setInfoBox({summary:"Info Message",detail:"No Active Class Selected!!!"}),null!==this.props.classIndex){for(var e=this.props.classStudentValues[this.props.classIndex].data,t={assessment:[],practical:[]},a=0;a<e.length;a++){var n=e[a].theory_marks,s=e[a].practical_marks;t.assessment.hasOwnProperty(n)?t.assessment["".concat(n)]+=1:t.assessment["".concat(n)]=1,t.practical.hasOwnProperty(s)?t.practical["".concat(s)]+=1:t.practical["".concat(s)]=1}this.setState({assessmentData:{labels:Object.keys(t.assessment),datasets:[{label:"Frequency of Assessment Marks",backgroundColor:"#42A5F5",data:Object.values(t.assessment)}]},practicalData:{labels:Object.keys(t.practical),datasets:[{label:"Frequency of Practical Marks",backgroundColor:"#42A5F5",data:Object.values(t.practical)}]},max:[Math.max.apply(Math,Object(R.a)(Object.values(t.assessment))),Math.max.apply(Math,Object(R.a)(Object.values(t.practical)))]})}}},{key:"getOption",value:function(e){return{legend:{labels:{fontColor:"#495057"}},scales:{xAxes:[{ticks:{fontColor:"#495057"}}],yAxes:[{ticks:{min:0,max:e,fontColor:"#495057"}}]}}}},{key:"render",value:function(){return s.a.createElement("div",null,this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,s.a.createElement("h1",{style:{color:"#1E90FF"}},this.props.sectionSubject[0]," Assessment Marks"),s.a.createElement("div",{className:"card",style:{padding:"25px"}},s.a.createElement(z.Chart,{type:"bar",data:this.state.assessmentData,options:this.getOption(this.state.max[0]+1)})),s.a.createElement("hr",null),s.a.createElement("h1",{style:{color:"#1E90FF"}},this.props.sectionSubject[0]," Practical Marks"),s.a.createElement("div",{className:"card",style:{padding:"25px"}},s.a.createElement(z.Chart,{type:"bar",data:this.state.practicalData,options:this.getOption(this.state.max[1]+1)})))}}]),a}(n.Component)),W=Object(p.b)((function(e){return{activeClass:e.teacher.activeClass,classStudentValues:e.teacher.classStudentValues,classIndex:e.teacher.activeClassStudentValuesIndex,sectionSubject:e.teacher.activeSectionSubject,infoBox:e.teacher.infoBox}}),(function(e){return{setInfoBox:function(t){return e(D(t))}}}))(K),Y=(a(113),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/notification/?person_id="+this.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({data:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"p-grid styleInbox p-mt-4 "},this.state.data.map((function(e,t){return s.a.createElement("div",{key:t,className:"p-col itstyle"},s.a.createElement("img",{src:"https://i.imgur.com/IqICwKK.jpg",width:"45px",height:"45px",alt:""}),s.a.createElement("div",{className:"inboxtext"},e.message))})))}}]),a}(s.a.Component)),Q=Object(p.b)((function(e){return{username:e.auth.username}}),null)(Y),Z=a(58),$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[],value2:""},n.onPostSend=n.onPostSend.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/post/?person_id="+this.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data})})).catch((function(e){return console.log(e)}))}},{key:"onPostSend",value:function(){var e=this;fetch("/api/post/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({section_id:this.props.activeSection[this.props.activeIndex].section_id,person_id:this.props.username,content:this.state.value2})}).then((function(e){return e.json()})).then((function(t){e.toast.show({severity:"info",summary:'Info"',detail:"Post Added Successfully!!!"}),fetch("/api/post/?person_id="+e.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(k.Toast,{ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"p-grid p-col p-ml-2 p-mt-4 p-shadow-2 p-mb-4 noticeBOX"},s.a.createElement("div",{className:"p-col-1"},s.a.createElement("img",{src:"https://i.imgur.com/hLwNrtw.jpg",alt:""})),s.a.createElement("div",{className:"fixInput p-col"},s.a.createElement(Z.InputTextarea,{className:"p-inputtextarea ",value:this.state.value2,onChange:function(t){return e.setState({value2:t.target.value})},rows:2,cols:30,autoResize:!0})),s.a.createElement("div",{className:"p-col-2"},s.a.createElement(C.Button,{label:"SEND",onClick:this.onPostSend}))),this.state.data?this.state.data.map((function(e,t){return s.a.createElement(n.Fragment,{key:t},s.a.createElement("div",{className:"p-col"},s.a.createElement("div",{className:"p-row p-p-2 fixPadd"},s.a.createElement("img",{src:"https://i.imgur.com/hLwNrtw.jpg",alt:"",width:"20px"}),e.full_name,s.a.createElement("div",{className:"fixedSUB"})),s.a.createElement("div",{className:"p-row p-p-2"},e.content)))})):null)}}]),a}(s.a.Component),ee=Object(p.b)((function(e){return{username:e.auth.username,activeSection:e.teacher.classes,activeIndex:e.teacher.activeClassStudentValuesIndex}}),null)($),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){null===this.props.activeClass&&this.props.setInfoBox({summary:"Info Message",detail:"No Active Class Selected!!!"})}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,s.a.createElement("div",{className:"p-fluid wholeStyle"},s.a.createElement("div",{className:"p-grid p-lg-12"},s.a.createElement("div",{className:"p-col-7"},s.a.createElement(ee,null)),s.a.createElement("div",{className:"p-col-4 p-offset-1 p-shadow-2"},s.a.createElement("div",{className:"header"},"Inbox"),s.a.createElement(Q,null)))))}}]),a}(s.a.Component),ae=Object(p.b)((function(e){return{activeClass:e.teacher.activeClass,infoBox:e.teacher.infoBox}}),(function(e){return{setInfoBox:function(t){return e(D(t))}}}))(te),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/class/lecture/?person_id="+this.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.props.onSetClass(t.data):e.toast.show({severity:"error",summary:"Class List Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"layout-main"},s.a.createElement(b.b,{path:"/",exact:!0,component:P}),s.a.createElement(b.b,{path:"/timeline",exact:!0,component:ae}),s.a.createElement(b.b,{path:"/marksview",exact:!0,component:H}),s.a.createElement(b.b,{path:"/marksentry",exact:!0,component:X}),s.a.createElement(b.b,{path:"/statistics",exact:!0,component:W}))}}]),a}(n.Component),se=Object(p.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{onSetClass:function(t){return e(function(e){return{type:"SET_TEACHER_CLASSES",value:e}}(t))}}}))(ne),re=function(e){return{type:"SET_STUDENT_INFOBOX",value:e}},ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={redirect:null,deadline:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.infoBox&&this.toast.show({severity:"info",summary:this.props.infoBox.summary,detail:this.props.infoBox.detail}),this.props.setInfoBoxNULL(),fetch("/api/marks/deadline/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({deadline:t.deadline.substring(0,10)}):e.toast.show({severity:"error",summary:"Deadline Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"onCardSelectHandler",value:function(e){this.props.selectCard(e),this.setState({redirect:s.a.createElement(b.a,{to:"/marksview"})})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-grid"},s.a.createElement("div",{className:"p-col-9"},s.a.createElement("h3",null,"Choose your semester card and see your internal marks.")),s.a.createElement("div",{className:"p-col-3"},s.a.createElement("h3",{style:{color:"red"}},"Marks Submission Till : ",this.state.deadline))),s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(t){return e.toast=t}}),this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement("div",{className:"p-lg-12 p-d-flex p-flex-wrap p-flex-column p-flex-lg-row"},this.props.sems.map((function(t,a){return s.a.createElement(w.Card,{key:a,title:"Semester Card",subTitle:"Semester No.",style:{width:"20em"},className:"p-shadow-8 p-mb-3 p-mr-3",footer:s.a.createElement(C.Button,{style:{width:"100%"},label:"View",onClick:function(){return e.onCardSelectHandler(a+1)}})},s.a.createElement("span",{style:{margin:"0 1em 0 0"},className:"p-tag p-badge-secondary p-tag-rounded"},t.value),s.a.createElement("p",{className:"p-m-0",style:{lineHeight:"1.5"}}))}))),this.state.redirect)}}]),a}(s.a.Component),ce=Object(p.b)((function(e){return{sems:e.student.sems,infoBox:e.student.infoBox,loading:e.student.loading}}),(function(e){return{selectCard:function(t){return e(function(e){return{type:"SET_STUDENT_ACTIVE_SEM",value:e}}(t))},setInfoBoxNULL:function(){return e(re(null))}}}))(ie),oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onRequestRecheck=n.onRequestRecheck.bind(Object(l.a)(n)),n.actionBodyTemplate=n.actionBodyTemplate.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;for(null===this.props.activeSem&&this.props.setInfoBox({summary:"Info Message",detail:"No Active Semester Selected!!!"}),e=0;e<this.props.semSubjectValues.length;e++)if(this.props.semSubjectValues[e].sem===this.props.activeSem){this.props.setActiveSemIndex(e);break}e===this.props.semSubjectValues.length&&null!==this.props.activeSem&&fetch("/api/marks/student/?person_id="+this.props.username+"&semester="+this.props.activeSem.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.status?(t.props.setSemSubjectValues({sem:t.props.activeSem,data:e.data}),t.props.setActiveSemIndex(t.props.semSubjectValues.length-1)):t.toast.show({severity:"error",summary:"Student Semester Marks Fetch Failed",detail:e.message})})).catch((function(e){return console.log(e)}))}},{key:"onRequestRecheck",value:function(e){var t=this;fetch("/api/notification/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person_id:this.props.username,subject_id:e.subject_id})}).then((function(e){return e.json()})).then((function(e){t.toast.show({severity:"info",summary:'Info"',detail:"Marks Recheck Request Sent!!!"})})).catch((function(e){return console.log(e)}))}},{key:"actionBodyTemplate",value:function(e){var t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"Request Recheck",className:"p-button-rounded p-button-danger",onClick:function(){return t.onRequestRecheck(e)}}))}},{key:"render",value:function(){var e=this,t=this.props.semSubjectValues[this.props.semIndex];return s.a.createElement(n.Fragment,null,this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement(n.Fragment,null,t?s.a.createElement("div",{className:"datatable-editing"},s.a.createElement(k.Toast,{ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"card"},s.a.createElement("h3",null,"Marks Summary View : Assessment and Practical Marks are NOT Editable"),s.a.createElement(L.DataTable,{value:t.data,header:"Subject Marks for Semester "+this.props.activeSem},s.a.createElement(V.Column,{field:"subject_code",header:"Subject Code"}),s.a.createElement(V.Column,{field:"title",header:"Subject Name"}),s.a.createElement(V.Column,{field:"theory_marks",header:"Assessment"}),s.a.createElement(V.Column,{field:"practical_marks",header:"Practical"}),s.a.createElement(V.Column,{body:this.actionBodyTemplate})))):null))}}]),a}(n.Component),le=Object(p.b)((function(e){return{activeSem:e.student.activeSem,username:e.auth.username,semSubjectValues:e.student.semSubjectValues,semIndex:e.student.activeSemSubjectValuesIndex,loading:e.student.loading,infoBox:e.student.infoBox}}),(function(e){return{setSemSubjectValues:function(t){return e({type:"SET_STUDENT_SEM_SUBJECT_VALUES",value:t})},setActiveSemIndex:function(t){return e(function(e){return{type:"SET_STUDENT_ACTIVE_SEM_SUBJECT_VALUE_INDEX",value:e}}(t))},setInfoBox:function(t){return e(re(t))}}}))(oe),ue=(a(115),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/notification/?person_id="+this.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"p-grid styleInbox p-mt-4 "},this.state.data.map((function(e,t){return s.a.createElement("div",{key:t,className:"p-col-12 itstyle"},s.a.createElement("img",{src:"https://i.imgur.com/IqICwKK.jpg",width:"45px",height:"45px",alt:""}),s.a.createElement("div",{className:"inboxtext"},e.message))})))}}]),a}(s.a.Component)),me=Object(p.b)((function(e){return{username:e.auth.username}}),null)(ue),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/post/?person_id="+this.props.username,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:" p-grid  p-ml-2  p-pt-1 p-shadow-2  "},this.state.data.map((function(e,t){return s.a.createElement(n.Fragment,{key:t},s.a.createElement("div",{className:"p-col-12"},s.a.createElement("div",{className:"p-row p-p-2 fixPadd"},s.a.createElement("img",{src:"https://i.imgur.com/hLwNrtw.jpg",alt:"",width:"20px"}),e.full_name,s.a.createElement("div",{className:"fixedSUB"},e.subject)),s.a.createElement("div",{className:"p-row p-p-2"},e.content)))})))}}]),a}(s.a.Component),he=Object(p.b)((function(e){return{username:e.auth.username}}),null)(de),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:" p-fluid wholeStyle"},s.a.createElement("div",{className:"p-grid p-lg-12"},s.a.createElement("div",{className:"p-col-7"},s.a.createElement(he,null)),s.a.createElement("div",{className:"p-col-4 p-offset-1 p-shadow-2"},s.a.createElement("div",{className:"header"},"Inbox"),s.a.createElement(me,null))))}}]),a}(s.a.Component),fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.resetStudentState(),this.props.setSems([{value:1},{value:2},{value:3},{value:4},{value:5},{value:6},{value:7},{value:8}])}},{key:"render",value:function(){return s.a.createElement("div",{className:"layout-main"},s.a.createElement(b.b,{path:"/",exact:!0,component:ce}),s.a.createElement(b.b,{path:"/marksview",exact:!0,component:le}),s.a.createElement(b.b,{path:"/studenttimeline",exact:!0,component:pe}))}}]),a}(n.Component),be=Object(p.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{setSems:function(t){return e({type:"SET_STUDENT_SEMS",value:t})},resetStudentState:function(){return e({type:"RESET_STUDENT_DEFAULTS"})}}}))(fe),ve=(a(53),a(116),a(117),a(38)),Ee=function(e){return{type:"SET_ADMIN_ACTIVE_TEACHER_USERNAME",value:e}},ge=function(e){return{type:"SET_ADMIN_INFOBOX",value:e}},Se=function(e){return{type:"SET_ADMIN_TEACHERS",value:e}},ye=(a(119),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).emptyTeacher={person_id:"",username:"",full_name:"",email:"",phone_no:"",program_code:""},n.state={redirect:null,newTeacher:null,teacherDialog:!1,department:[],deleteTeacherDialog:!1,deleteTeachersDialog:!1,teacher:n.emptyTeacher,selectedTeachers:null,submitted:!1,globalFilter:null},n.leftToolbarTemplate=n.leftToolbarTemplate.bind(Object(l.a)(n)),n.rightToolbarTemplate=n.rightToolbarTemplate.bind(Object(l.a)(n)),n.actionBodyTemplate=n.actionBodyTemplate.bind(Object(l.a)(n)),n.openNew=n.openNew.bind(Object(l.a)(n)),n.hideDialog=n.hideDialog.bind(Object(l.a)(n)),n.saveTeacher=n.saveTeacher.bind(Object(l.a)(n)),n.editTeacher=n.editTeacher.bind(Object(l.a)(n)),n.confirmDeleteTeacher=n.confirmDeleteTeacher.bind(Object(l.a)(n)),n.deleteTeacher=n.deleteTeacher.bind(Object(l.a)(n)),n.exportCSV=n.exportCSV.bind(Object(l.a)(n)),n.confirmDeleteSelected=n.confirmDeleteSelected.bind(Object(l.a)(n)),n.onInputChange=n.onInputChange.bind(Object(l.a)(n)),n.onProgramChange=n.onProgramChange.bind(Object(l.a)(n)),n.hideDeleteTeacherDialog=n.hideDeleteTeacherDialog.bind(Object(l.a)(n)),n.hideDeleteTeachersDialog=n.hideDeleteTeachersDialog.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.infoBox&&this.toast.show({severity:"info",summary:this.props.infoBox.summary,detail:this.props.infoBox.detail}),this.props.setInfoBoxNULL(),fetch("/api/dept/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({department:t.data}):e.toast.show({severity:"error",summary:"Department List Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"openNew",value:function(){this.setState({teacher:this.emptyTeacher,submitted:!1,newTeacher:!0,teacherDialog:!0})}},{key:"hideDialog",value:function(){this.setState({submitted:!1,teacherDialog:!1})}},{key:"hideDeleteTeacherDialog",value:function(){this.setState({deleteTeacherDialog:!1})}},{key:"hideDeleteTeachersDialog",value:function(){this.setState({deleteTeachersDialog:!1})}},{key:"saveTeacher",value:function(){var e=this,t={submitted:!0};if(this.state.teacher.username&&this.state.teacher.full_name&&this.state.teacher.email&&this.state.teacher.phone_no&&this.state.teacher.program_code){var a,n=null,s=null;for(this.state.newTeacher?(s="POST",n="Teacher Created"):(s="PATCH",n="Teacher Updated"),a=0;a<this.state.department.length&&this.state.department[a].dept_name!==this.state.teacher.program_code.dept_name;a++);var r=Object(S.a)(Object(S.a)({},this.state.teacher),{},{dept_id:this.state.department[a].dept_id});fetch("/api/user/teacher/"+this.state.teacher.person_id.toString(),{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){"success"===t.status?fetch("/api/user/teacher/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.props.setTeachers(t.data):e.toast.show({severity:"error",summary:"Teacher List Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)})):e.toast.show({severity:"error",summary:"Teacher Update Failed",detail:t.message})})).catch((function(e){return console.log(e)})),this.toast.show({severity:"success",summary:"Successful",detail:n,life:3e3}),t=Object(S.a)(Object(S.a)({},t),{},{newTeacher:!1,teacherDialog:!1,teacher:this.emptyTeacher})}this.setState(t)}},{key:"editTeacher",value:function(e){this.setState({teacher:Object(S.a)({},e),teacherDialog:!0})}},{key:"teacherClickHandler",value:function(e){this.props.selectCard(e.person_id),this.setState({redirect:s.a.createElement(b.a,{to:"/teachersessions"})})}},{key:"confirmDeleteTeacher",value:function(e){this.setState({teacher:Object(S.a)({},e),deleteTeacherDialog:!0})}},{key:"deleteTeacher",value:function(){var e=this,t=this.props.teachers.filter((function(t){return t.person_id!==e.state.teacher.person_id}));fetch("/api/user/teacher/delete/"+this.state.teacher.person_id.toString(),{method:"PATCH",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){"success"===a.status?(e.setState({deleteTeacherDialog:!1,teacher:e.emptyTeacher}),e.props.setTeachers(t)):e.toast.show({severity:"error",summary:"Teacher Fetch Failed",detail:a.message})})).catch((function(e){return console.log(e)})),this.toast.show({severity:"success",summary:"Successful",detail:"Teacher Deleted",life:3e3})}},{key:"findIndexByUsername",value:function(e){for(var t=-1,a=0;a<this.props.teachers.length;a++)if(this.props.teachers[a].username===e){t=a;break}return t}},{key:"createId",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},{key:"exportCSV",value:function(){this.dt.exportCSV()}},{key:"confirmDeleteSelected",value:function(){this.setState({deleteTeachersDialog:!0})}},{key:"onInputChange",value:function(e,t){var a=e.target&&e.target.value||"",n=Object(S.a)({},this.state.teacher);n["".concat(t)]=a,this.setState({teacher:n})}},{key:"onProgramChange",value:function(e){this.setState({teacher:Object(S.a)(Object(S.a)({},this.state.teacher),{},{program_code:e.value})})}},{key:"leftToolbarTemplate",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"New",icon:"pi pi-plus",className:"p-button-success p-mr-2",onClick:this.openNew}))}},{key:"rightToolbarTemplate",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"Export",icon:"pi pi-upload",className:"p-button-help",onClick:this.exportCSV}))}},{key:"actionBodyTemplate",value:function(e){var t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{icon:"pi pi-pencil",className:"p-button-rounded p-button-success p-mr-2",onClick:function(){return t.editTeacher(e)}}),s.a.createElement(C.Button,{icon:"pi pi-briefcase",className:"p-button-rounded p-button-info p-mr-2",onClick:function(){return t.teacherClickHandler(e)}}),s.a.createElement(C.Button,{icon:"pi pi-trash",className:"p-button-rounded p-button-danger p-mr-2",onClick:function(){return t.confirmDeleteTeacher(e)}}))}},{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"table-header"},s.a.createElement("h5",{className:"p-m-0"},"Manage Teachers"),s.a.createElement("span",{className:"p-input-icon-left"},s.a.createElement("i",{className:"pi pi-search"}),s.a.createElement(_.InputText,{type:"search",onInput:function(t){return e.setState({globalFilter:t.target.value})},placeholder:"Search..."}))),a=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:this.hideDialog}),s.a.createElement(C.Button,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:this.saveTeacher})),r=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:this.hideDeleteTeacherDialog}),s.a.createElement(C.Button,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:this.deleteTeacher}));return s.a.createElement(n.Fragment,null,s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(t){return e.toast=t}}),this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement("div",{className:"datatable-crud-demo"},s.a.createElement("div",{className:"card"},s.a.createElement(ve.Toolbar,{className:"p-mb-4",style:{marginTop:"20px"},left:this.leftToolbarTemplate,right:this.rightToolbarTemplate}),s.a.createElement(L.DataTable,{ref:function(t){return e.dt=t},value:this.props.teachers,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} teachers",globalFilter:this.state.globalFilter,header:t},s.a.createElement(V.Column,{field:"username",style:{width:"150px"},header:"UserName",sortable:!0}),s.a.createElement(V.Column,{field:"full_name",style:{width:"150px"},header:"Full Name",sortable:!0}),s.a.createElement(V.Column,{field:"email",style:{width:"350px"},header:"Email"}),s.a.createElement(V.Column,{field:"phone_no",style:{width:"120px"},header:"Phone No"}),s.a.createElement(V.Column,{field:"dept_name",header:"Department",sortable:!0}),s.a.createElement(V.Column,{body:this.actionBodyTemplate}))),s.a.createElement(O.Dialog,{visible:this.state.teacherDialog,style:{width:"450px"},header:"Teacher Details",modal:!0,className:"p-fluid",footer:a,onHide:this.hideDialog},s.a.createElement("div",{className:"p-field"},s.a.createElement("label",{htmlFor:"username"},"UserName"),s.a.createElement(_.InputText,{id:"username",value:this.state.teacher.username,onChange:function(t){return e.onInputChange(t,"username")},required:!0,autoFocus:!0,className:h()({"p-invalid":this.state.submitted&&!this.state.teacher.username})}),this.state.submitted&&!this.state.teacher.username&&s.a.createElement("small",{className:"p-invalid"},"UserName is required.")),s.a.createElement("div",{className:"p-field"},s.a.createElement("label",{htmlFor:"full_name"},"Name"),s.a.createElement(_.InputText,{id:"full_name",value:this.state.teacher.full_name,onChange:function(t){return e.onInputChange(t,"full_name")},required:!0,autoFocus:!0,className:h()({"p-invalid":this.state.submitted&&!this.state.teacher.full_name})}),this.state.submitted&&!this.state.teacher.full_name&&s.a.createElement("small",{className:"p-invalid"},"Name is required.")),s.a.createElement("div",{className:"p-field"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement(_.InputText,{id:"email",value:this.state.teacher.email,onChange:function(t){return e.onInputChange(t,"email")},required:!0,autoFocus:!0,className:h()({"p-invalid":this.state.submitted&&!this.state.teacher.email})}),this.state.submitted&&!this.state.teacher.email&&s.a.createElement("small",{className:"p-invalid"},"Email is required.")),s.a.createElement("div",{className:"p-field"},s.a.createElement("label",{htmlFor:"phone_no"},"Phone No:"),s.a.createElement(_.InputText,{id:"phone_no",value:this.state.teacher.phone_no,onChange:function(t){return e.onInputChange(t,"phone_no")},required:!0,autoFocus:!0,className:h()({"p-invalid":this.state.submitted&&!this.state.teacher.phone_no})}),this.state.submitted&&!this.state.teacher.phone_no&&s.a.createElement("small",{className:"p-invalid"},"Phone No is required.")),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"Department"},"Department"),s.a.createElement(q.Dropdown,{value:this.state.teacher.program_code,options:this.state.department,onChange:this.onProgramChange,optionLabel:"dept_name",required:!0,placeholder:"Select a Department"}),this.state.submitted&&!this.state.teacher.program_code&&s.a.createElement("small",{className:"p-invalid"},"Department is required."))),s.a.createElement(O.Dialog,{visible:this.state.deleteTeacherDialog,style:{width:"450px"},header:"Confirm",modal:!0,footer:r,onHide:this.hideDeleteTeacherDialog},s.a.createElement("div",{className:"confirmation-content"},s.a.createElement("i",{className:"pi pi-exclamation-triangle p-mr-3",style:{fontSize:"2rem"}}),this.state.teacher&&s.a.createElement("span",null,"Are you sure you want to delete ",s.a.createElement("b",null,this.state.teacher.full_name),"?")))),this.state.redirect)}}]),a}(n.Component)),Te=Object(p.b)((function(e){return{teachers:e.admin.teachers,infoBox:e.admin.infoBox,loading:e.admin.loading}}),(function(e){return{selectCard:function(t){return e(Ee(t))},setInfoBoxNULL:function(){return e(ge(null))},setTeachers:function(t){return e(Se(t))}}}))(ye),je=(a(120),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).emptyLecture={batch:"",subject_code:"",group_code:"",program_code:"",semester:""},n.state={redirect:null,lectureDialog:!1,submitted:!1,displayConfirmation:!1,lectureSel:{batch_id:"",program_id:"",subject_id:"",section_id:"",semester:""},lecture:Object(S.a)({},n.emptyLecture),batchs:["074"],programs:["BCT","BEX"],subjects:[],sections:[]},n.addClass=n.addClass.bind(Object(l.a)(n)),n.leftToolbarTemplate=n.leftToolbarTemplate.bind(Object(l.a)(n)),n.hideDialog=n.hideDialog.bind(Object(l.a)(n)),n.addLecture=n.addLecture.bind(Object(l.a)(n)),n.onProgramChange=n.onProgramChange.bind(Object(l.a)(n)),n.onBatchChange=n.onBatchChange.bind(Object(l.a)(n)),n.onSubjectChange=n.onSubjectChange.bind(Object(l.a)(n)),n.onGroupChange=n.onGroupChange.bind(Object(l.a)(n)),n.onDeleteLecture=n.onDeleteLecture.bind(Object(l.a)(n)),n.onClick=n.onClick.bind(Object(l.a)(n)),n.onHide=n.onHide.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(null===this.props.activeTeacher)this.props.setInfoBox({summary:"Info Message",detail:"No Active Teacher Selected!!!"});else{var t;for(t=0;t<this.props.teacherClassValues.length;t++)if(this.props.teacherClassValues[t].username===this.props.activeTeacher){this.props.setActiveTeacherIndex(t);break}t===this.props.teacherClassValues.length&&null!==this.props.activeTeacher&&fetch("/api/class/lecture/?person_id="+this.props.activeTeacher,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(e.props.setActiveTeacherIndex(e.props.teacherClassValues.length),e.props.setActiveTeacherClasses({username:e.props.activeTeacher,data:t.data})):e.toast.show({severity:"error",summary:"Class List Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}}},{key:"addClass",value:function(){var e=this;fetch("/api/batch/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({batchs:t.data})})).catch((function(e){return console.log(e)})),fetch("/api/program/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({programs:t.data})})).catch((function(e){return console.log(e)})),this.setState({teacher:Object(S.a)({},this.emptyLecture),submitted:!1,lectureDialog:!0})}},{key:"leftToolbarTemplate",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"New",icon:"pi pi-plus",className:"p-button-success p-mr-2",onClick:this.addClass}))}},{key:"hideDialog",value:function(){this.setState({submitted:!1,lectureDialog:!1})}},{key:"addLecture",value:function(){var e=this,t={submitted:!0};if(this.state.lecture.group_code&&this.state.lectureSel.subject_id){var a={person_id:this.props.activeTeacher,section_id:this.state.lectureSel.section_id,subject_id:this.state.lectureSel.subject_id};fetch("/api/class/lecture/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(e.props.resetTeacherClasses(),fetch("/api/class/lecture/?person_id="+e.props.activeTeacher,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.props.setActiveTeacherIndex(e.props.teacherClassValues.length),e.props.setActiveTeacherClasses({username:e.props.activeTeacher,data:t.data}),e.toast.show({severity:"success",summary:"Successful",detail:"Lecture Added",life:3e3})})).catch((function(e){return console.log(e)}))):e.toast.show({severity:"error",summary:"Lecture Add Failed",detail:t.message})})).catch((function(e){return console.log(e)})),t=Object(S.a)(Object(S.a)({},t),{},{lectureDialog:!1,lecture:Object(S.a)({},this.emptyLecture)})}this.setState(t)}},{key:"onBatchChange",value:function(e){var t=Object(S.a)({},this.emptyLecture);t.batch=e.value,this.setState({lecture:t,lectureSel:Object(S.a)(Object(S.a)({},this.state.lectureSel),{},{batch_id:e.value.batch_id,program_id:"",subject_id:"",section_id:"",semester:""})})}},{key:"onProgramChange",value:function(e){var t=this,a=Object(S.a)({},this.emptyLecture);a.program_code=e.value,a.batch=this.state.lecture.batch,this.setState({lecture:a,lectureSel:Object(S.a)(Object(S.a)({},this.state.lectureSel),{},{program_id:e.value.program_id,subject_id:"",section_id:"",semester:""})}),fetch("/api/class/section?batch_id="+this.state.lectureSel.batch_id+"&program_id="+e.value.program_id,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t.setState({sections:e.data})})).catch((function(e){return console.log(e)}))}},{key:"onGroupChange",value:function(e){var t=this,a=this.state.lecture;a.group_code=e.value,a.program_code=this.state.lecture.program_code,a.batch=this.state.lecture.batch;var n=0;for(n=0;n<this.state.batchs.length;n++)if(this.state.lectureSel.batch_id===this.state.batchs[n].batch_id){this.setState({lecture:a,lectureSel:Object(S.a)(Object(S.a)({},this.state.lectureSel),{},{section_id:e.value.section_id,semester:this.state.batchs[n].semester,subject_id:""})});break}fetch("/api/program/subject?program_id="+this.state.lectureSel.program_id+"&semester="+this.state.batchs[n].semester.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t.setState({subjects:e.data})})).catch((function(e){return console.log(e)}))}},{key:"onSubjectChange",value:function(e){var t=this.state.lecture;t.subject_code=e.value,this.setState({lecture:t,lectureSel:Object(S.a)(Object(S.a)({},this.state.lectureSel),{},{subject_id:e.value.subject_id})})}},{key:"onDeleteLecture",value:function(){var e=this;fetch("/api/class/lecture/"+this.props.teacherClassValues[this.props.teacherIndex].data[this.state.delIndex].lecture_id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(e.props.resetTeacherClasses(),fetch("/api/class/lecture/?person_id="+e.props.activeTeacher,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.props.setActiveTeacherIndex(e.props.teacherClassValues.length),e.props.setActiveTeacherClasses({username:e.props.activeTeacher,data:t.data})})).catch((function(e){return console.log(e)}))):e.toast.show({severity:"error",summary:"Lecture Remove Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"onClick",value:function(e,t){var a,n=(a={},Object(y.a)(a,"".concat(e),!0),Object(y.a)(a,"delIndex",t),a);this.setState(n)}},{key:"onHide",value:function(e){this.setState(Object(y.a)({},"".concat(e),!1))}},{key:"onApprove",value:function(e){this.setState(Object(y.a)({},"".concat(e),!1)),this.onDeleteLecture()}},{key:"renderFooter",value:function(e){var t=this;return s.a.createElement("div",null,s.a.createElement(C.Button,{label:"No",icon:"pi pi-times",onClick:function(){return t.onHide(e)},className:"p-button-text"}),s.a.createElement(C.Button,{label:"Yes",icon:"pi pi-check",onClick:function(){return t.onApprove(e)},autoFocus:!0}))}},{key:"render",value:function(){var e=this,t=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:this.hideDialog}),s.a.createElement(C.Button,{label:"Add",icon:"pi pi-check",className:"p-button-text",onClick:this.addLecture}));return s.a.createElement(n.Fragment,null,s.a.createElement(k.Toast,{ref:function(t){return e.toast=t}}),this.props.infoBox?s.a.createElement(b.a,{to:"/"}):null,this.props.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):s.a.createElement(n.Fragment,null,this.props.teacherClassValues.length>this.props.teacherIndex?s.a.createElement(n.Fragment,null,s.a.createElement(ve.Toolbar,{style:{marginTop:"20px"},className:"p-mb-4",left:this.leftToolbarTemplate}),s.a.createElement("div",{className:"p-lg-12 p-d-flex p-flex-wrap p-flex-column p-flex-lg-row"},0===this.props.teacherClassValues.length?null:this.props.teacherClassValues[this.props.teacherIndex].data.map((function(t,a){return s.a.createElement(w.Card,{key:a,title:t.subject_code,subTitle:t.title,style:{width:"20em"},className:"p-shadow-8 p-mb-3 p-mr-3",footer:s.a.createElement(C.Button,{style:{width:"100%"},label:"Remove",onClick:function(){return e.onClick("displayConfirmation",a)}})},s.a.createElement("span",{style:{margin:"0 1em 0 0"},className:"p-tag p-badge-secondary p-tag-rounded"},t.section_code.slice(0,-2)),s.a.createElement("span",{className:"p-tag p-badge-secondary p-tag-rounded"},t.section_code.slice(-2)),s.a.createElement("p",{className:"p-m-0",style:{lineHeight:"1.5"}}))}))),s.a.createElement(O.Dialog,{visible:this.state.lectureDialog,style:{width:"450px"},header:"Lecture Details",modal:!0,className:"p-fluid",footer:t,onHide:this.hideDialog},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"Batch"},"Batch"),s.a.createElement(q.Dropdown,{value:this.state.lecture.batch,options:this.state.batchs,onChange:this.onBatchChange,optionLabel:"batch_code",required:!0,placeholder:"Select a Batch"}),this.state.submitted&&!this.state.lecture.batch&&s.a.createElement("small",{className:"p-invalid"},"Batch is required.")),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"Program"},"Program"),s.a.createElement(q.Dropdown,{value:this.state.lecture.program_code,options:this.state.programs,onChange:this.onProgramChange,optionLabel:"program_code",required:!0,placeholder:"Select a Program"}),this.state.submitted&&!this.state.lecture.program_code&&s.a.createElement("small",{className:"p-invalid"},"Program is required.")),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"Section"},"Section"),s.a.createElement(q.Dropdown,{value:this.state.lecture.group_code,options:this.state.sections,onChange:this.onGroupChange,optionLabel:"section_code",required:!0,placeholder:"Select a Section"}),this.state.submitted&&!this.state.lecture.group_code&&s.a.createElement("small",{className:"p-invalid"},"Section is required.")),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"Subject"},"Subject"),s.a.createElement(q.Dropdown,{value:this.state.lecture.subject_code,options:this.state.subjects,onChange:this.onSubjectChange,optionLabel:"title",required:!0,placeholder:"Select a Subject"}),this.state.submitted&&!this.state.lecture.subject_code&&s.a.createElement("small",{className:"p-invalid"},"Subject is required."))),s.a.createElement(O.Dialog,{header:"Confirmation",visible:this.state.displayConfirmation,modal:!0,style:{width:"350px"},footer:this.renderFooter("displayConfirmation"),onHide:function(){return e.onHide("displayConfirmation")}},s.a.createElement("div",{className:"confirmation-content"},s.a.createElement("i",{className:"pi pi-exclamation-triangle p-mr-3",style:{fontSize:"2rem"}}),s.a.createElement("span",null,"Are you sure you want to proceed?")))):null))}}]),a}(n.Component)),Ce=Object(p.b)((function(e){return{activeTeacher:e.admin.activeTeacherUsername,teacherClassValues:e.admin.activeTeacherClasses,teacherIndex:e.admin.activeTeacherClassValuesIndex,loading:e.admin.loading,infoBox:e.admin.infoBox}}),(function(e){return{setActiveTeacherClasses:function(t){return e(function(e){return{type:"SET_ADMIN_ACTIVE_TEACHER_CLASSES",value:e}}(t))},setActiveTeacherUsername:function(t){return e(Ee(t))},setActiveTeacherIndex:function(t){return e(function(e){return{type:"SET_ADMIN_ACTIVE_TEACHER_CLASS_VALUE_INDEX",value:e}}(t))},setInfoBox:function(t){return e(ge(t))},resetTeacherClasses:function(){return e({type:"RESET_ADMIN_TEACHER_CLASS_VALUES"})}}}))(je),ke=(a(121),a(59)),Oe=a(60),_e=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={selectedSem:null,uniqueRoll:"",loading:!1,data:null,countData:{teachers:0,students:0},refreshDialog:!1,batch_code:"",deadline:"",credentials:[]},n.semester=["1","2","3","4","5","6","7","8"],n.onSemesterChange=n.onSemesterChange.bind(Object(l.a)(n)),n.onFetchStudentSemMarks=n.onFetchStudentSemMarks.bind(Object(l.a)(n)),n.confirmRefresh=n.confirmRefresh.bind(Object(l.a)(n)),n.hideRefreshDialog=n.hideRefreshDialog.bind(Object(l.a)(n)),n.confirmRefreshFlow=n.confirmRefreshFlow.bind(Object(l.a)(n)),n.setDeadline=n.setDeadline.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/batch/stats/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({countData:t.data}):e.toast.show({severity:"error",summary:"Stats Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)})),fetch("/api/marks/deadline/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({deadline:t.deadline.substring(0,10)}):e.toast.show({severity:"error",summary:"Deadline Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))}},{key:"onSemesterChange",value:function(e){this.setState({selectedSem:e.value})}},{key:"onFetchStudentSemMarks",value:function(){var e=this;""!==this.state.uniqueRoll&&null!==this.state.selectedSem?(this.setState({loading:!0}),fetch("/api/user/student/?username="+this.state.uniqueRoll,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){fetch("/api/marks/student/?person_id="+t.data.person_id+"&semester="+e.state.selectedSem,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.setState({data:t.data,loading:!1}):e.toast.show({severity:"error",summary:"Student Details Fetch Failed",detail:t.message})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))):this.toast.show({severity:"error",summary:"Invalid Input",detail:"Please input a valid value!!!"})}},{key:"hideRefreshDialog",value:function(){this.setState({refreshDialog:!1})}},{key:"confirmRefresh",value:function(e){this.setState({refreshDialog:e})}},{key:"confirmRefreshFlow",value:function(){var e=this,t="year"===this.state.refreshDialog?"/api/batch/":"/api/batch/newSession/";fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({batch_code:this.state.batch_code})}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(e.toast.show({severity:"info",summary:"Database Updated",detail:"Successfully Refreshed "+e.state.refreshDialog}),"year"===e.state.refreshDialog?e.setState({credentials:t.credentials,refreshDialog:!1}):e.setState({refreshDialog:!1})):(e.toast.show({severity:"error",summary:"Database Update Failed",detail:t.message}),e.setState({refreshDialog:!1})),fetch("/api/batch/stats/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({countData:t.data})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}},{key:"setDeadline",value:function(e){var t=this;fetch("/api/marks/deadline/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deadline:e.toISOString().substring(0,10)})}).then((function(e){return e.json()})).then((function(a){"success"===a.status?(t.setState({deadline:e.toISOString().substring(0,10)}),t.toast.show({severity:"info",summary:"Deadline Updated",detail:"Successfully Changed!!"})):t.toast.show({severity:"error",summary:"Deadline Update Failed",detail:a.message})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e,t=this,a=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.Button,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:this.hideRefreshDialog}),s.a.createElement(C.Button,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:this.confirmRefreshFlow}));return 0!==this.state.credentials.length?(e=s.a.createElement(Oe.CSVDownload,{className:"csv-download",target:"_self",filename:"credentials",data:this.state.credentials}),this.toast.show({severity:"info",summary:"Downloaded File Followup",detail:"Change or Add .csv extension to the Downloaded File!!"}),this.setState({credentials:[]})):e=null,s.a.createElement(n.Fragment,null,s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(e){return t.toast=e}}),e,s.a.createElement("div",{className:" p-fluid"},s.a.createElement("div",{className:"p-mt-2 p-grid "},s.a.createElement("div",{className:"cardResult  p-mt-2   p-col-3"},s.a.createElement("div",{className:"p-row headerPAPER"},s.a.createElement("h2",null,"Total Teachers")),s.a.createElement("hr",null),s.a.createElement("div",{className:"numberBIG p-row"},this.state.countData.teachers)),s.a.createElement("div",{className:"cardResult p-mt-2 p-offset-2  p-col-3"},s.a.createElement("div",{className:"p-row headerPAPER"},s.a.createElement("h2",null,"Total Students")),s.a.createElement("hr",null),s.a.createElement("div",{className:"numberBIG p-row"},this.state.countData.students)),s.a.createElement("div",{className:"p-col-3"},s.a.createElement("div",{className:"cardResult p-offset-2  p-row"},s.a.createElement("div",{className:"p-grid"},s.a.createElement("div",{className:"p-col-4"},s.a.createElement(_.InputText,{type:"text",width:"50px",value:this.state.batch_code,placeholder:"Year",onChange:function(e){return t.setState({batch_code:e.target.value})}})),s.a.createElement("div",{className:"p-col-8"},s.a.createElement(C.Button,{label:"Add Students",className:"p-button-rounded p-button-success",onClick:function(){return t.confirmRefresh("year")}})))),s.a.createElement("div",{className:"cardResult p-mt-2 p-offset-2  p-row"},s.a.createElement(C.Button,{label:"Initiate New Session",className:"p-button-rounded p-button-info",onClick:function(){return t.confirmRefresh("session")}}))),s.a.createElement("div",{className:"p-mt-2 p-col-3"},s.a.createElement("div",{className:"p-field"},s.a.createElement(ke.Calendar,{id:"icon",showIcon:!0,placeholder:"Set Marks Submission Deadline",onChange:function(e){return t.setDeadline(e.value)}})),s.a.createElement("h3",null,"Marks Submission Till : ",this.state.deadline))),s.a.createElement("div",{className:"p-fluid card"},s.a.createElement("div",{className:"p-grid p-lg-12 p-mt-2 "},s.a.createElement("div",{className:"p-col"},s.a.createElement("h3",null,"Unique Roll No"),s.a.createElement("div",{className:"p-inputgroup"},s.a.createElement(_.InputText,{label:"Unique Roll No",value:this.state.uniqueRoll,onChange:function(e){return t.setState({uniqueRoll:e.target.value})},placeholder:"Enter By Unique Roll No"}))),s.a.createElement("div",{className:"p-col"},s.a.createElement("h3",null,"Semester"),s.a.createElement("div",{className:"p-inputgroup"},s.a.createElement(q.Dropdown,{value:this.state.selectedSem,options:this.semester,onChange:this.onSemesterChange,placeholder:"Select Sem"}))),s.a.createElement("div",{className:"p-col"},s.a.createElement("h3",null,"Search"),s.a.createElement(C.Button,{icon:"pi pi-search",onClick:this.onFetchStudentSemMarks}))))),this.state.loading?s.a.createElement("div",{style:{paddingTop:"50px"}},s.a.createElement(B.ProgressSpinner,{style:{width:"100%"}})):null,this.state.data?s.a.createElement("div",{className:"datatable-editing"},s.a.createElement(k.Toast,{ref:function(e){return t.toast=e}}),s.a.createElement("div",{className:"card"},s.a.createElement(L.DataTable,{value:this.state.data,header:"Data"},s.a.createElement(V.Column,{field:"subject_code",header:"Subject Code"}),s.a.createElement(V.Column,{field:"title",header:"Subject Name"}),s.a.createElement(V.Column,{field:"theory_marks",header:"Assessment"}),s.a.createElement(V.Column,{field:"practical_marks",header:"Practical"})))):null,s.a.createElement(O.Dialog,{visible:!1!==this.state.refreshDialog,style:{width:"450px"},header:"Confirm",modal:!0,footer:a,onHide:this.hideRefreshDialog},s.a.createElement("div",{className:"confirmation-content"},s.a.createElement("i",{className:"pi pi-exclamation-triangle p-mr-3",style:{fontSize:"2rem"}}),s.a.createElement("span",null,"Are you sure you want to refresh ",s.a.createElement("b",null,this.state.refreshDialog),"?"),s.a.createElement("br",null),"year"===this.state.refreshDialog?" This will Fetch new year Student list!!":null,"session"===this.state.refreshDialog?"This will Recreate new Session !!":null,s.a.createElement("br",null),s.a.createElement("b",null,"NOTE: This may take upto several seconds!!"))))}}]),a}(s.a.Component),Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/user/teacher/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"success"===t.status?e.props.onSetTeachers(t.data):e.toast.show({severity:"error",summary:"Teacher Fetch Failed",detail:t.message})})).catch((function(e){return console.log("Teacher err",e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"layout-main"},s.a.createElement(b.b,{path:"/",exact:!0,component:Te}),s.a.createElement(b.b,{path:"/teachersessions",exact:!0,component:Ce}),s.a.createElement(b.b,{path:"/admindashboard",exact:!0,component:_e})))}}]),a}(n.Component),xe=Object(p.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{onSetTeachers:function(t){return e(Se(t))}}}))(Ne),we=(a(127),a(128),a(56),a(129),a(61)),De=a.n(we),Ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).onSubmitHandler=n.onSubmitHandler.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"onSubmitHandler",value:function(e){e.preventDefault();var t=document.getElementById("username").value,a=document.getElementById("password").value;this.props.onSignIn(t,a)}},{key:"render",value:function(){var e=this;return null!==this.props.error&&(this.toast.show({severity:"info",summary:"Login Failed!!",detail:this.props.error}),this.props.setError(null)),s.a.createElement("div",null,s.a.createElement(k.Toast,{style:{zIndex:1e4},ref:function(t){return e.toast=t}}),s.a.createElement("div",{className:"customgrid"},s.a.createElement("div",{className:"p-col bigText "},"Internal Marks Management System"),s.a.createElement("div",{className:"p-col"},s.a.createElement("div",{className:"login-page"},s.a.createElement("div",{className:"form"},s.a.createElement("img",{src:De.a,width:"60px",alt:"TU Logo"}),s.a.createElement("h2",null,"IMMS x DBMS"),s.a.createElement("form",{className:"login-form"},s.a.createElement("input",{id:"username",type:"text",placeholder:"username"}),s.a.createElement("input",{id:"password",type:"password",placeholder:"password"}),s.a.createElement("button",{onClick:this.onSubmitHandler},"login")))))))}}]),a}(s.a.Component),Ae=Object(p.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,isAuthenticated:null!==e.auth.token,authRedirectPath:e.auth.authRedirectPath}}),(function(e){return{onSignIn:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"});var n={username:e,password:t};fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){"success"===e.status?(localStorage.setItem("token",e.token),localStorage.setItem("id",e.data.user.username),localStorage.setItem("role",["admin","teacher","student"][e.data.user.role]),a(function(e,t,a,n,s){return{type:"AUTH_SUCCESS",token:e,username:t,role:a,fullname:n,email:s}}(e.token,e.data.user.person_id,["admin","teacher","student"][e.data.user.role],e.data.user.full_name,e.data.user.email))):a(I(e.message))})).catch((function(e){a(I(e))}))}}(t,a))},setError:function(t){return e(I(t))}}}))(Ie),Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.resetStudent(),this.props.resetTeacher(),this.props.resetAdmin(),this.props.onLogOut()}},{key:"render",value:function(){return s.a.createElement(b.a,{to:"/"})}}]),a}(n.Component),Be=Object(p.b)(null,(function(e){return{resetTeacherState:function(){return e({type:"RESET_TEACHER_DEFAULTS"})},resetStudent:function(){return e({type:"RESET_STUDENT_DEFAULTS"})},resetTeacher:function(){return e({type:"RESET_TEACHER_DEFAULTS"})},resetAdmin:function(){return e({type:"RESET_ADMIN_DEFAULTS"})},onLogOut:function(){return e(A())}}}))(Me),Fe=a(62),Pe=a.n(Fe),Re=(a(130),a(63)),Le=a.n(Re),Ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={layoutMode:"static",layoutColorMode:"light",staticMenuInactive:!1,overlayMenuActive:!1,mobileMenuActive:!1},Le.a.ripple=!0,e.onWrapperClick=e.onWrapperClick.bind(Object(l.a)(e)),e.onToggleMenu=e.onToggleMenu.bind(Object(l.a)(e)),e.onSidebarClick=e.onSidebarClick.bind(Object(l.a)(e)),e.onMenuItemClick=e.onMenuItemClick.bind(Object(l.a)(e)),e}return Object(o.a)(a,[{key:"onWrapperClick",value:function(e){this.menuClick||this.setState({overlayMenuActive:!1,mobileMenuActive:!1}),this.menuClick=!1}},{key:"onToggleMenu",value:function(e){if(this.menuClick=!0,this.isDesktop())"overlay"===this.state.layoutMode?this.setState({overlayMenuActive:!this.state.overlayMenuActive}):"static"===this.state.layoutMode&&this.setState({staticMenuInactive:!this.state.staticMenuInactive});else{var t=this.state.mobileMenuActive;this.setState({mobileMenuActive:!t})}e.preventDefault()}},{key:"onSidebarClick",value:function(e){this.menuClick=!0}},{key:"onMenuItemClick",value:function(e){e.item.items||this.setState({overlayMenuActive:!1,mobileMenuActive:!1})}},{key:"createMenu",value:function(){"teacher"===this.props.role?this.menu=[{label:"Teacher DashBoard",icon:"pi pi-fw pi-home",command:function(){window.location="#/"}},{label:"Teacher Timeline",icon:"pi pi-fw pi-globe",command:function(){window.location="#/timeline"}},{label:"Section Dashboard",icon:"pi pi-fw pi-users",command:function(){window.location="#/marksview"}},{label:"Marks Edit Mode",icon:"pi pi-fw pi-user-edit",command:function(){window.location="#/marksentry"}},{label:"Score Statistics",icon:"pi pi-fw pi-chart-bar",command:function(){window.location="#/statistics"}},{label:"Log Out",icon:"pi pi-fw pi-sign-out",command:function(){window.location="#/logout"}}]:"student"===this.props.role?this.menu=[{label:"Student Timeline",icon:"pi pi-fw pi-globe",command:function(){window.location="#/studenttimeline"}},{label:"Student Dashboard",icon:"pi pi-fw pi-home",command:function(){window.location="#/"}},{label:"Subject Marks",icon:"pi pi-fw pi-users",command:function(){window.location="#/marksview"}},{label:"Log Out",icon:"pi pi-fw pi-sign-out",command:function(){window.location="#/logout"}}]:"admin"===this.props.role&&(this.menu=[{label:"Admin Home",icon:"pi pi-fw pi-eye",command:function(){window.location="#/admindashboard"}},{label:"Admin Dashboard",icon:"pi pi-fw pi-home",command:function(){window.location="#/"}},{label:"Teacher Sessions",icon:"pi pi-fw pi-calendar",command:function(){window.location="#/teachersessions"}},{label:"Log Out",icon:"pi pi-fw pi-sign-out",command:function(){window.location="#/logout"}}])}},{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}},{key:"removeClass",value:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"isDesktop",value:function(){return window.innerWidth>1024}},{key:"componentDidUpdate",value:function(){this.state.mobileMenuActive?this.addClass(document.body,"body-overflow-hidden"):this.removeClass(document.body,"body-overflow-hidden")}},{key:"render",value:function(){var e=this;if(this.props.isAuthenticated){this.createMenu();var t=h()("layout-wrapper",{"layout-overlay":"overlay"===this.state.layoutMode,"layout-static":"static"===this.state.layoutMode,"layout-static-sidebar-inactive":this.state.staticMenuInactive&&"static"===this.state.layoutMode,"layout-overlay-sidebar-active":this.state.overlayMenuActive&&"overlay"===this.state.layoutMode,"layout-mobile-sidebar-active":this.state.mobileMenuActive}),a=h()("layout-sidebar",{"layout-sidebar-light":"light"===this.state.layoutColorMode}),n=null;switch(this.props.role){case"admin":n=s.a.createElement(xe,null);break;case"teacher":n=s.a.createElement(se,null);break;case"student":n=s.a.createElement(be,null);break;default:n=null}return s.a.createElement("div",{className:t,onClick:this.onWrapperClick},s.a.createElement(f,{onToggleMenu:this.onToggleMenu}),s.a.createElement("div",{ref:function(t){return e.sidebar=t},className:a,onClick:this.onSidebarClick},s.a.createElement("div",{className:"layout-logo"},s.a.createElement("img",{alt:"Logo",width:"250px",src:Pe.a})),s.a.createElement(x,null),s.a.createElement(g,{model:this.menu,onMenuItemClick:this.onMenuItemClick})),s.a.createElement(b.b,{path:"/logout",exact:!0,component:Be}),n,s.a.createElement(b.a,{to:"/"}),s.a.createElement("div",{className:"layout-mask"}))}return s.a.createElement(Ae,null)}}]),a}(n.Component),Ue=Object(p.b)((function(e){return{role:e.auth.role,isAuthenticated:null!==e.auth.token}}),null)(Ve),He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),a}(n.Component),qe=Object(b.f)(He),Ge=a(64),Je=a(35),Xe={token:null,username:null,fullname:null,role:null,error:null,loading:!1,redirect:null,email:null},ze=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{error:null,loading:!0})},Ke=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{token:t.token,username:t.username,fullname:t.fullname,role:t.role,email:t.email})},We=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{error:t.error,loading:!1})},Ye=function(e,t){return Object(S.a)({},Xe)},Qe=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{redirect:t.value})},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ze(e);case"AUTH_SUCCESS":return Ke(e,t);case"AUTH_FAIL":return We(e,t);case"AUTH_LOGOUT":return Ye();case"SET_AUTH_REDIRECT":return Qe(e,t);default:return e}},$e={infoBox:null,activeClass:null,activeSectionSubject:[],activeClassStudentValuesIndex:null,classes:[],classStudentValues:[],loading:!0},et=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{classes:t.value,loading:!1})},tt=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{infoBox:t.value})},at=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{activeClass:t.Class,loading:!0})},nt=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{activeClassStudentValuesIndex:t.value,loading:!1})},st=function(e,t){return Object(S.a)(Object(S.a)({},e),{},{classStudentValues:[].concat(Object(R.a)(e.classStudentValues),[t.value]),loading:!1})},rt=function(e,t){var a=Object(R.a)(e.classStudentValues);return a[e.activeClassStudentValuesIndex].data=t.value,Object(S.a)(Object(S.a)({},e),{},{classStudentValues:a})},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEACHER_CLASSES":return et(e,t);case"SET_TEACHER_INFOBOX":return tt(e,t);case"RESET_TEACHER_DEFAULTS":return Object(S.a)({},$e);case"SET_TEACHER_ACTIVE_CLASS":return at(e,t);case"SET_TEACHER_CLASS_STUDENT_VALUES":return st(e,t);case"SET_TEACHER_ACTIVE_SECTION_SUBJECT":return Object(S.a)(Object(S.a)({},e),{},{activeSectionSubject:t.value});case"UPDATE_TEACHER_CLASS_STUDENT_VALUES":return rt(e,t);case"SET_TEACHER_ACTIVE_CLASS_STUDENT_VALUE_INDEX":return nt(e,t);default:return e}},ct={infoBox:null,loading:!0,activeSem:null,sems:[],semSubjectValues:[],activeSemSubjectValuesIndex:null},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STUDENT_ACTIVE_SEM":return Object(S.a)(Object(S.a)({},e),{},{activeSem:t.value,loading:!0});case"SET_STUDENT_SEMS":return Object(S.a)(Object(S.a)({},e),{},{sems:t.value,loading:!1});case"SET_STUDENT_SEM_SUBJECT_VALUES":return Object(S.a)(Object(S.a)({},e),{},{semSubjectValues:[].concat(Object(R.a)(e.semSubjectValues),[t.value]),loading:!1});case"SET_STUDENT_INFOBOX":return Object(S.a)(Object(S.a)({},e),{},{infoBox:t.value});case"RESET_STUDENT_DEFAULTS":return Object(S.a)({},ct);case"SET_STUDENT_ACTIVE_SEM_SUBJECT_VALUE_INDEX":return Object(S.a)(Object(S.a)({},e),{},{activeSemSubjectValuesIndex:t.value,loading:!1});default:return e}},lt={infoBox:null,loading:!0,activeTeacherUsername:null,activeTeacherClasses:[],activeTeacherClassValuesIndex:null,teacherDepartments:[],teachers:[]},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADMIN_ACTIVE_TEACHER_USERNAME":return Object(S.a)(Object(S.a)({},e),{},{activeTeacherUsername:t.value,loading:!0});case"SET_ADMIN_ACTIVE_TEACHER_CLASSES":return Object(S.a)(Object(S.a)({},e),{},{activeTeacherClasses:[].concat(Object(R.a)(e.activeTeacherClasses),[t.value]),loading:!1});case"SET_ADMIN_ACTIVE_TEACHER_CLASS_VALUE_INDEX":return Object(S.a)(Object(S.a)({},e),{},{activeTeacherClassValuesIndex:t.value,loading:!1});case"SET_ADMIN_TEACHER_DEPARTMENTS":return Object(S.a)(Object(S.a)({},e),{},{teacherDepartments:t.value});case"SET_ADMIN_TEACHERS":return Object(S.a)(Object(S.a)({},e),{},{teachers:t.value,loading:!1});case"SET_ADMIN_INFOBOX":return Object(S.a)(Object(S.a)({},e),{},{infoBox:t.value});case"RESET_ADMIN_TEACHER_CLASS_VALUES":return Object(S.a)(Object(S.a)({},e),{},{activeTeacherClasses:[]});case"RESET_ADMIN_DEFAULTS":return Object(S.a)({},lt);default:return e}},mt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Je.c,dt=Object(Je.b)({auth:Ze,teacher:it,student:ot,admin:ut}),ht=Object(Je.d)(dt,mt(Object(Je.a)(Ge.a)));i.a.render(s.a.createElement(p.a,{store:ht},s.a.createElement(v.a,null,s.a.createElement(qe,null,s.a.createElement(Ue,null)))),document.getElementById("root"))},45:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){e.exports=a.p+"static/media/Profile-6.d898415e.jpg"},61:function(e,t,a){e.exports=a.p+"static/media/tulogo.838d6952.png"},62:function(e,t,a){e.exports=a.p+"static/media/pcampus.328e3389.jpg"},67:function(e,t,a){e.exports=a(131)},75:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.3f3576b8.chunk.js.map